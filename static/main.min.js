$(function(){var e=document.getElementById("supportMessage"),n=document.getElementById("voice"),t=(document.getElementById("volume"),document.getElementById("rate"),document.getElementById("pitch"),$(".cleverbotForm")),o=$(".query"),s=$(".thinking"),r=function(){window.speechSynthesis.onvoiceschanged=function(){var e=window.speechSynthesis.getVoices();e.forEach(function(e,t){var o=document.createElement("option");o.value=t,o.innerHTML=e.name,n.appendChild(o)})}},i=function(){"speechSynthesis"in window?e.innerHTML="Your browser <strong>supports</strong> speech synthesis.":(e.innerHTML='Sorry your browser <strong>does not support</strong> speech synthesis.<br>Try this in <a href="http://www.google.co.uk/intl/en/chrome/browser/canary.html">Chrome Canary</a>.',e.classList.add("not-supported"))},c=function(e){var t=new SpeechSynthesisUtterance;t.text=e;var o=window.speechSynthesis.getVoices();t.voice=o[$(n).val()],t.volume=1,t.pitch=1,t.rate=1,window.speechSynthesis.speak(t)},a=function(){u(),$.ajax({type:"POST",url:$SCRIPT_ROOT+"chat",data:t.serialize(),success:function(e){var e=JSON.parse(e);console.log(e.message)},complete:function(e){var n=JSON.parse(e.responseText).message;c(n),h()},error:function(e){alert(e)}})},u=function(){s.show()},h=function(){s.hide()};t.on("submit",function(e){e.preventDefault(),a(),o.val("")});var p=function(){i(),r()};p()});